# V3 交互模式决策矩阵

**目标**: 快速决策使用哪种交互模式  
**使用方法**: 根据场景特征查找对应的交互模式

---

## 🎯 交互模式决策树

```
需要用户输入/操作？
│
├─ 是 → 需要完成多个步骤？
│      │
│      ├─ 是 → 使用 多步弹窗 (Stepper Modal)
│      │      例如：启动工作流、设置向导
│      │
│      └─ 否 → 操作简单还是复杂？
│             │
│             ├─ 简单 → 使用 内联编辑 (Inline Edit)
│             │        例如：修改标题、更新状态
│             │
│             └─ 复杂 → 使用 单步弹窗 (Modal)
│                      例如：配置导出、回答DD问题
│
└─ 否 → 展示信息
       │
       ├─ 独立信息单元 → 使用 卡片 (Card)
       │                例如：项目卡片、统计卡片
       │
       ├─ 需要快速查看详情 → 使用 抽屉 (Drawer)
       │                      例如：项目详情、历史记录
       │
       ├─ 需要全屏展示 → 使用 全屏页面 (Full Page)
       │                  例如：IM工作台、报告详情
       │
       └─ 临时提示信息 → 使用 Toast/Notification
                         例如：保存成功、错误提示
```

---

## 📊 交互模式对比表

| 交互模式 | 适用场景 | 优点 | 缺点 | 示例 |
|---------|---------|------|------|------|
| **卡片 (Card)** | 展示独立信息 | 信息密度高<br>可快速浏览<br>易于排列 | 空间有限<br>信息较简略 | 项目卡片<br>统计卡片 |
| **弹窗 (Modal)** | 需要用户关注的操作 | 强制聚焦<br>不离开当前页<br>适合表单 | 遮挡内容<br>移动端体验差 | 创建项目<br>导出配置 |
| **抽屉 (Drawer)** | 查看详情/辅助信息 | 保持上下文<br>可滚动查看<br>适合移动端 | 遮挡部分内容 | 项目详情<br>导出历史 |
| **下拉菜单 (Dropdown)** | 选项选择/快速操作 | 节省空间<br>操作便捷 | 选项过多时不友好 | 筛选器<br>更多操作 |
| **内联编辑 (Inline)** | 快速修改单个字段 | 操作直接<br>无需跳转 | 不适合复杂编辑 | 修改标题<br>更新金额 |
| **全屏页面 (Full Page)** | 复杂的创建/编辑 | 空间充足<br>功能完整 | 失去上下文 | IM工作台<br>报告编辑 |
| **Toast** | 临时反馈 | 不打断操作<br>自动消失 | 容易错过<br>信息有限 | 保存成功<br>网络错误 |
| **Popover/Tooltip** | 补充说明 | 按需显示<br>不占空间 | 信息量小<br>易被忽略 | 字段说明<br>帮助提示 |

---

## 🎨 具体场景的交互模式建议

### 1. 数据展示类

#### 1.1 列表/网格展示
```
场景：展示多个项目
推荐：卡片网格 (Card Grid)

原因：
✅ 每个项目是独立信息单元
✅ 需要同时展示多个项目
✅ 用户需要快速浏览和比较

交互：
- 默认：显示关键信息（名称、标签、时间）
- 悬停：显示更多信息 + 快速操作按钮
- 点击：打开详情（抽屉）
- 拖拽：调整顺序（可选）

代码示例：
<div class="projects-grid">
  <div
    v-for="project in projects"
    :key="project.id"
    class="project-card"
    @click="openDetails(project)"
  >
    <div class="card-header">
      <h3>{{ project.name }}</h3>
      <el-tag>{{ project.industry }}</el-tag>
    </div>
    <div class="card-body">
      <div class="meta">{{ project.stage }}</div>
      <div class="date">{{ project.date }}</div>
    </div>
    <div class="card-actions" v-show="hoveredId === project.id">
      <el-button size="small">查看</el-button>
      <el-button size="small">编辑</el-button>
    </div>
  </div>
</div>
```

#### 1.2 详情查看
```
场景：查看项目完整信息
推荐：侧边抽屉 (Drawer)

原因：
✅ 保持列表上下文
✅ 可以连续查看多个项目
✅ 移动端友好（可全屏）

不推荐：跳转新页面
❌ 失去列表上下文
❌ 无法快速切换项目
❌ 增加页面层级

交互：
- 打开：从右侧滑入 (300ms)
- 关闭：点击遮罩/按钮/ESC键
- 内容：标签页组织（概览、报告、IM）
- 操作：底部固定操作栏

布局：
┌─────────┬────────────┐
│ 列表    │ 详情抽屉   │
│ [卡片]  │ [标题]     │
│ [卡片]  │ [标签页]   │
│ [卡片]  │ [内容]     │
│         │ [操作栏]   │
└─────────┴────────────┘
```

---

### 2. 数据输入类

#### 2.1 简单输入（1-3个字段）
```
场景：修改项目名称、更新金额
推荐：内联编辑 (Inline Edit)

原因：
✅ 操作直接，减少步骤
✅ 不离开当前页面
✅ 即时反馈

交互：
1. 点击字段 → 变为可编辑状态
2. 输入内容 → 显示保存/取消按钮
3. 点击保存 → 更新数据 + 提示成功
4. 点击外部 → 自动保存或还原

示例：
<div class="editable-field">
  <span v-if="!isEditing" @click="startEdit">
    {{ value }}
    <el-icon><Edit /></el-icon>
  </span>
  <div v-else class="edit-mode">
    <el-input v-model="tempValue" @blur="save" />
    <el-button size="small" @click="save">✓</el-button>
    <el-button size="small" @click="cancel">✗</el-button>
  </div>
</div>
```

#### 2.2 中等复杂度（4-8个字段）
```
场景：配置导出选项、回答DD问题
推荐：单步弹窗 (Modal)

原因：
✅ 集中注意力
✅ 不离开当前上下文
✅ 表单功能完整

交互：
1. 点击触发按钮
2. 弹窗淡入 + 放大动画 (200ms)
3. 填写表单（实时验证）
4. 点击确认 → 执行操作
5. 弹窗淡出 + Toast 提示

布局：
┌────────────────────┐
│ 标题           [×] │
├────────────────────┤
│                    │
│ [表单字段]         │
│ [表单字段]         │
│ [表单字段]         │
│                    │
├────────────────────┤
│  [取消]  [确认]    │
└────────────────────┘
```

#### 2.3 高复杂度（>8个字段或多步骤）
```
场景：启动DD工作流、设置机构偏好
推荐：多步弹窗 (Stepper Modal)

原因：
✅ 降低认知负担
✅ 引导用户完成
✅ 提高完成率

交互：
1. 显示步骤指示器（1/3, 2/3, 3/3）
2. 每步验证后才能进入下一步
3. 可以返回上一步修改
4. 最后一步确认所有信息

布局：
┌────────────────────────┐
│ 标题              [×]  │
├────────────────────────┤
│ ● ──── ○ ──── ○       │ ← 步骤指示
│ 步骤1  步骤2  步骤3    │
├────────────────────────┤
│                        │
│ [当前步骤内容]         │
│                        │
├────────────────────────┤
│ [上一步] [取消] [下一步]│
└────────────────────────┘
```

---

### 3. 操作反馈类

#### 3.1 成功/失败提示
```
场景：保存成功、删除成功
推荐：Toast 消息

原因：
✅ 不打断用户操作
✅ 自动消失
✅ 支持快速操作（撤销）

交互：
- 位置：右上角（桌面）/ 顶部（移动）
- 时长：3秒自动消失
- 类型：success / warning / error / info
- 可选：添加撤销按钮

示例：
ElMessage({
  message: '项目已保存',
  type: 'success',
  duration: 3000
});

// 带撤销功能
ElMessage({
  message: h('div', [
    '项目已删除 ',
    h('el-button', {
      type: 'text',
      onClick: () => undoDelete()
    }, '撤销')
  ]),
  type: 'warning',
  duration: 5000
});
```

#### 3.2 危险操作确认
```
场景：删除项目、归档报告
推荐：确认弹窗 (Confirm Dialog)

原因：
✅ 防止误操作
✅ 给用户反悔机会
✅ 明确操作后果

交互：
1. 点击删除按钮
2. 弹出确认对话框
3. 显示操作后果说明
4. 二次确认（输入名称或点击确认）

布局：
┌────────────────────────┐
│ ⚠️ 确认删除？      [×] │
├────────────────────────┤
│                        │
│ 您确定要删除项目       │
│ "深圳AI公司" 吗？      │
│                        │
│ ⚠️ 此操作无法撤销      │
│                        │
│ 相关的报告和数据将     │
│ 一并删除。             │
│                        │
├────────────────────────┤
│   [取消]  [确认删除]   │
└────────────────────────┘
```

#### 3.3 长时间操作反馈
```
场景：生成估值分析、导出大文件
推荐：进度提示

方式1：Toast + 进度条
┌────────────────────┐
│ 正在生成估值分析... │
│ [████████░░] 80%   │
└────────────────────┘

方式2：弹窗 + 详细进度
┌────────────────────┐
│ 生成中...    [×]   │
├────────────────────┤
│ ▶ 搜索市场数据... │
│ ▶ 分析可比公司... │
│ ▷ 计算估值区间... │
│                    │
│ [████████░░░] 60%  │
└────────────────────┘

方式3：骨架屏 (Skeleton)
[█████░░░░░░░░░░░░░]
[███████████░░░░░░░]
[████████░░░░░░░░░░]
```

---

### 4. 数据筛选类

#### 4.1 简单筛选（2-4个条件）
```
场景：按状态、时间筛选
推荐：下拉筛选器 (Dropdown Filter)

布局：
┌─────────────────────────────┐
│ [搜索] [筛选▼] [排序▼]      │
└─────────────────────────────┘
        ↓
┌─────────────────┐
│ 快速筛选        │
├─────────────────┤
│ ☑ 进行中        │
│ ☐ 已完成        │
│ ☐ 已归档        │
├─────────────────┤
│ [更多筛选...]   │
└─────────────────┘

交互：
- 点击 [筛选▼] → 下拉展开
- 勾选条件 → 立即筛选（无需确认）
- 显示已选标签 → 可点击 × 移除
```

#### 4.2 高级筛选（>4个条件）
```
场景：组合多个筛选条件
推荐：筛选面板 (Filter Panel)

触发：点击 "更多筛选..." 或 "高级筛选"

布局：
┌──────────────────────────┐
│ 高级筛选      [应用] [重置]│
├──────────────────────────┤
│                          │
│ 状态                     │
│ ☑ 进行中 ☐ 已完成       │
│                          │
│ 创建时间                 │
│ [开始] 至 [结束]         │
│                          │
│ 融资金额                 │
│ [最小] - [最大]          │
│                          │
│ 标签                     │
│ [搜索...]                │
│ [AI ×] [SaaS ×]          │
│                          │
└──────────────────────────┘

位置选项：
1. 顶部展开（推荐）
2. 左侧抽屉
3. 弹窗（不推荐，影响上下文）
```

---

### 5. 批量操作类

#### 5.1 批量选择与操作
```
场景：批量删除、批量导出
推荐：多选 + 浮动工具栏

交互流程：
1. 默认状态：每个卡片左上角有隐藏的复选框
2. 悬停任一卡片 → 显示复选框
3. 勾选第一个 → 所有复选框显示 + 顶部出现工具栏
4. 继续勾选更多项
5. 工具栏显示已选数量和操作按钮

布局：
┌─────────────────────────────────┐
│ 已选择 3 项  [导出] [归档] [删除]│ ← 浮动工具栏
└─────────────────────────────────┘

┌────────┐ ┌────────┐ ┌────────┐
│☑ 项目1 │ │☑ 项目2 │ │☑ 项目3 │
└────────┘ └────────┘ └────────┘

┌────────┐ ┌────────┐
│☐ 项目4 │ │☐ 项目5 │
└────────┘ └────────┘

代码示例：
<div class="selection-toolbar" v-if="selectedItems.length > 0">
  <span>已选择 {{ selectedItems.length }} 项</span>
  <el-button @click="exportSelected">导出</el-button>
  <el-button @click="archiveSelected">归档</el-button>
  <el-button type="danger" @click="deleteSelected">删除</el-button>
</div>
```

---

## 🎨 动画与过渡时机

### 1. 进入动画
```css
/* 弹窗进入 */
.modal-enter-active {
  animation: modal-in 0.3s ease-out;
}

@keyframes modal-in {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* 抽屉进入 */
.drawer-enter-active {
  animation: drawer-slide-in 0.3s ease-out;
}

@keyframes drawer-slide-in {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

/* 卡片进入（列表） */
.card-enter-active {
  animation: card-fade-in 0.4s ease-out;
}

@keyframes card-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
```

### 2. 交互动画
```css
/* 悬停效果 */
.card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 点击反馈 */
.button:active {
  transform: scale(0.96);
  transition: transform 0.1s;
}

/* 加载动画 */
.loading-pulse {
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}
```

---

## 📱 移动端适配规则

### 1. 弹窗 → 全屏页面
```
桌面端：
┌─────────────────┐
│     内容        │  弹窗
│                 │
└─────────────────┘

移动端：
┌─────────────────┐
│ [←] 标题    [×] │  全屏
├─────────────────┤
│                 │
│     内容        │
│                 │
│                 │
│                 │
├─────────────────┤
│     [确认]      │
└─────────────────┘
```

### 2. 抽屉 → 底部抽屉或全屏
```
桌面端（侧边）：
┌────────┬────────┐
│ 列表   │ 抽屉   │
│        │        │
└────────┴────────┘

移动端（底部）：
┌────────────────┐
│ 列表           │
├────────────────┤
│ 抽屉内容       │
│ (可向上拖拽)   │
└────────────────┘
```

### 3. 悬停 → 长按
```
桌面端：鼠标悬停显示操作
移动端：长按显示操作菜单
```

---

## 🎯 实施建议

### Phase 1: 核心交互（P0）
1. ✅ 实现多步弹窗组件（启动工作流）
2. ✅ 实现侧边抽屉组件（项目详情）
3. ✅ 优化卡片悬停交互
4. ✅ 统一 Toast 提示

### Phase 2: 增强功能（P1）
1. 实现筛选面板
2. 实现批量操作
3. 实现内联编辑
4. 添加确认对话框

### Phase 3: 体验优化（P2）
1. 完善所有动画
2. 移动端适配
3. 快捷键支持
4. 无障碍优化

---

**使用建议**：
1. 遇到新功能时，先查这个决策矩阵
2. 选择推荐的交互模式
3. 参考代码示例实现
4. 保持全局一致性
