# Magellan V4 äº§å“ä¼˜åŒ–ä¸å¼€å‘è®¡åˆ’

**ç‰ˆæœ¬**: V4.0
**åˆ›å»ºæ—¥æœŸ**: 2025-10-26
**çŠ¶æ€**: è§„åˆ’ä¸­
**ç›®æ ‡**: è§£å†³V3äº§å“é€»è¾‘é—®é¢˜ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

---

## ğŸ“‹ ç›®å½•

1. [V3é—®é¢˜åˆ†æ](#v3é—®é¢˜åˆ†æ)
2. [V4æ ¸å¿ƒæ”¹è¿›](#v4æ ¸å¿ƒæ”¹è¿›)
3. [åŠŸèƒ½è®¾è®¡](#åŠŸèƒ½è®¾è®¡)
4. [å®æ–½è·¯çº¿å›¾](#å®æ–½è·¯çº¿å›¾)
5. [æŠ€æœ¯æ–¹æ¡ˆ](#æŠ€æœ¯æ–¹æ¡ˆ)

---

## ğŸ” V3é—®é¢˜åˆ†æ

### é—®é¢˜1: å·¥ä½œæµé€»è¾‘ä¸é—­ç¯ âŒ

**ç°çŠ¶**:
```
ç”¨æˆ·è¾“å…¥ â†’ DDåˆ†æ â†’ ç”ŸæˆIM â†’ [æ–­ç‚¹ï¼Œæ— åç»­]
```

**ç—›ç‚¹**:
- âœ— IMç”Ÿæˆåï¼Œç”¨æˆ·æ— æ³•ç»§ç»­è¡¥å……ä¿¡æ¯
- âœ— å¦‚éœ€æ·»åŠ è®¿è°ˆçºªè¦ã€è¡¥å……ææ–™ï¼Œæ²¡æœ‰å…¥å£
- âœ— æ— æ³•åŸºäºåˆæ­¥IMè¿›è¡Œè¿­ä»£ä¼˜åŒ–
- âœ— HITLèŠ‚ç‚¹è®¾è®¡äº†ä½†æ²¡æœ‰çœŸæ­£å¯ç”¨çš„äº¤äº’

**å½±å“**:
- ğŸ”´ ç”¨æˆ·ä½“éªŒæ–­è£‚
- ğŸ”´ æ— æ³•æ»¡è¶³çœŸå®æŠ•ç ”æµç¨‹éœ€æ±‚
- ğŸ”´ ç³»ç»Ÿä»·å€¼å¤§æ‰“æŠ˜æ‰£

---

### é—®é¢˜2: åŠŸèƒ½å®šä½æ··ä¹± âŒ

**ç°çŠ¶**:

| è§†å›¾ | å½“å‰åŠŸèƒ½ | é—®é¢˜ |
|------|---------|------|
| **ä»»åŠ¡é©¾é©¶èˆ±** | å¯åŠ¨DDåˆ†æï¼Œå±•ç¤ºæµç¨‹ | åªèƒ½åˆ†æï¼Œä¸èƒ½å¯¹è¯ |
| **æŠ¥å‘Šè§†å›¾** | æŸ¥çœ‹å†å²æŠ¥å‘Š | ä¸ä»»åŠ¡é©¾é©¶èˆ±åŠŸèƒ½é‡å¤ |
| **IMå·¥ä½œå°** | ç¼–è¾‘æŠ•èµ„å¤‡å¿˜å½• | ä¸‰æ å¸ƒå±€ï¼Œä½†äº¤äº’å•è–„ |

**å†²çªç‚¹**:
- âœ— ä»»åŠ¡é©¾é©¶èˆ± â‰ˆ æŠ¥å‘Šè§†å›¾ï¼ˆéƒ½æ˜¯çœ‹ç»“æœï¼‰
- âœ— æ²¡æœ‰æ¸…æ™°çš„"å¯¹è¯"å…¥å£
- âœ— ç”¨æˆ·ä¸çŸ¥é“åœ¨å“ªé‡Œç»§ç»­å·¥ä½œ

**ç”¨æˆ·å›°æƒ‘**:
- â“ åˆ†æå®Œäº†ï¼Œç„¶åå‘¢ï¼Ÿ
- â“ æˆ‘æƒ³é—®Agenté—®é¢˜ï¼Œå»å“ªé‡Œé—®ï¼Ÿ
- â“ æˆ‘æœ‰æ–°ææ–™ï¼Œæ€ä¹ˆåŠ è¿›å»ï¼Ÿ

---

### é—®é¢˜3: UI/UXè¿‡äºç®€é™‹ âŒ

**ç°çŠ¶é—®é¢˜**:

#### 3.1 ç¼ºä¹åŠ¨æ€åé¦ˆ
```
å½“å‰: é™æ€æ­¥éª¤åˆ—è¡¨
âœ— çœ‹ä¸åˆ°Agentåœ¨åšä»€ä¹ˆ
âœ— æ²¡æœ‰å®æ—¶æ€è€ƒè¿‡ç¨‹
âœ— ç­‰å¾…æ—¶æ— èŠã€ç„¦è™‘
```

**ç«å“å¯¹æ¯”**:
- ChatGPT: å®æ—¶æ‰“å­—æ•ˆæœï¼Œæ€è€ƒè¿‡ç¨‹å¯è§
- Claude: Thinkingæ ‡ç­¾ï¼Œå±•ç¤ºæ¨ç†è¿‡ç¨‹
- Perplexity: æœç´¢æºå®æ—¶å±•ç¤º

#### 3.2 ç©ºé—´åˆ©ç”¨ç‡ä½
```
å½“å‰å¸ƒå±€:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å¤§ç‰‡ç©ºç™½åŒºåŸŸ                  â”‚
â”‚                                     â”‚
â”‚    [Agent1] â†’ [Agent2] â†’ [Agent3]   â”‚
â”‚                                     â”‚
â”‚         åˆæ˜¯å¤§ç‰‡ç©ºç™½                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æµªè´¹**:
- âœ— å³ä¾§ç©ºé—´å®Œå…¨ç©ºç½®
- âœ— æ²¡æœ‰è¾…åŠ©ä¿¡æ¯å±•ç¤º
- âœ— ç¼ºå°‘ä¸Šä¸‹æ–‡æç¤º

#### 3.3 äº¤äº’å•è°ƒ
- âœ— åªæœ‰"å‘é€"ä¸€ä¸ªæŒ‰é’®
- âœ— æ²¡æœ‰å¼•å¯¼æ€§æ“ä½œ
- âœ— æ— æ„å›¾è¯†åˆ«
- âœ— å¼ºåˆ¶è¿›å…¥åˆ†ææµç¨‹

---

### é—®é¢˜4: ç¼ºå°‘æ™ºèƒ½äº¤äº’ âŒ

**ç°çŠ¶**:
```
ç”¨æˆ·: "å¸®æˆ‘åˆ†æXXå…¬å¸"
ç³»ç»Ÿ: [ç«‹å³å¯åŠ¨DDæµç¨‹] â† å¤ªç²—æš´ï¼
```

**åº”è¯¥**:
```
ç”¨æˆ·: "å¸®æˆ‘åˆ†æXXå…¬å¸"
ç³»ç»Ÿ:
  - ğŸ¤” è¯†åˆ«æ„å›¾: æŠ•èµ„åˆ†æ
  - ğŸ’¬ "æˆ‘ç†è§£æ‚¨æƒ³å¯¹XXå…¬å¸è¿›è¡ŒæŠ•èµ„å°½è°ƒã€‚è¯·é—®ï¼š"
    [ ] è¿›è¡Œå®Œæ•´DDåˆ†æ (çº¦3-5åˆ†é’Ÿ)
    [ ] å¿«é€Ÿæ¦‚è§ˆ (30ç§’)
    [ ] å…ˆèŠèŠè¿™å®¶å…¬å¸
  - ç­‰å¾…ç”¨æˆ·ç¡®è®¤
```

**ç¼ºå¤±çš„èƒ½åŠ›**:
- âœ— æ— æ„å›¾è¯†åˆ«
- âœ— æ— ç”¨æˆ·ç¡®è®¤
- âœ— æ— é€‰é¡¹å¼•å¯¼
- âœ— æ— å¤šè½®å¯¹è¯

---

## ğŸ¯ V4æ ¸å¿ƒæ”¹è¿›

### æ”¹è¿›1: å®Œæ•´çš„è¿­ä»£é—­ç¯ âœ…

**æ–°å·¥ä½œæµ**:
```
è¾“å…¥ â†’ DDåˆ†æ â†’ åˆæ­¥IM â†’
  â†“
  â”œâ”€ æ·»åŠ ææ–™ â†’ é‡æ–°åˆ†æ â†’ æ›´æ–°IM
  â”œâ”€ æé—®Agent â†’ è·å¾—è§£ç­” â†’ æ›´æ–°IM
  â”œâ”€ ç¼–è¾‘ä¿®æ”¹ â†’ ä¿å­˜ç‰ˆæœ¬ â†’ å¯¼å‡º
  â””â”€ ç»§ç»­å¯¹è¯ â†’ æ·±åº¦æŒ–æ˜ â†’ å®Œå–„IM
  â†“
å®Œæˆ â†’ å½’æ¡£/å¯¼å‡º
```

**å…³é”®èƒ½åŠ›**:
- âœ… æ”¯æŒå¤šè½®è¿­ä»£
- âœ… å¯éšæ—¶æ·»åŠ æ–°ä¿¡æ¯
- âœ… Agentå¯ç»§ç»­æ·±æŒ–
- âœ… ç‰ˆæœ¬ç®¡ç†å’Œå›æ»š

---

### æ”¹è¿›2: é‡æ–°å®šä¹‰è§†å›¾åŠŸèƒ½ âœ…

**æ–°æ¶æ„**:

| è§†å›¾ | æ–°åŠŸèƒ½å®šä½ | å…³é”®èƒ½åŠ› |
|------|-----------|---------|
| **ğŸ’¬ æ™ºèƒ½å¯¹è¯** | ä¸»å·¥ä½œåŒºï¼ŒAIåŠ©æ‰‹å¯¹è¯ | æ„å›¾è¯†åˆ«ã€å¤šè½®å¯¹è¯ã€å¼•å¯¼å¼åˆ†æ |
| **ğŸ“Š åˆ†æçœ‹æ¿** | å®æ—¶åˆ†æè¿›åº¦ï¼ŒåŠ¨æ€å±•ç¤ºAgentå·¥ä½œ | å³ä¾§é¢æ¿ã€å®æ—¶åé¦ˆã€ä¸­é—´ç»“æœ |
| **ğŸ“ IMå·¥ä½œå°** | æŠ•èµ„å¤‡å¿˜å½•ç¼–è¾‘å’Œå®Œå–„ | å¯Œæ–‡æœ¬ç¼–è¾‘ã€ç‰ˆæœ¬ç®¡ç†ã€åä½œ |
| **ğŸ—‚ï¸ é¡¹ç›®åº“** | å†å²é¡¹ç›®ç®¡ç† | æœç´¢ã€æ ‡ç­¾ã€å½’æ¡£ |

**å»é™¤**:
- âŒ "æŠ¥å‘Šè§†å›¾"ï¼ˆåŠŸèƒ½åˆå¹¶åˆ°é¡¹ç›®åº“ï¼‰
- âŒ "ä»»åŠ¡é©¾é©¶èˆ±"ï¼ˆé‡æ„ä¸ºæ™ºèƒ½å¯¹è¯+åˆ†æçœ‹æ¿ï¼‰

---

### æ”¹è¿›3: åŠ¨æ€äº¤äº’ä½“éªŒ âœ…

#### 3.1 å®æ—¶Agentå·¥ä½œå±•ç¤º

**è®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ™ºèƒ½å¯¹è¯                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                       â”‚  â”‚  ğŸ¤– Agentå·¥ä½œé¢æ¿         â”‚   â”‚
â”‚  â”‚   ç”¨æˆ·æ¶ˆæ¯            â”‚  â”‚                          â”‚   â”‚
â”‚  â”‚   AIå›å¤              â”‚  â”‚  [TeamAgent]             â”‚   â”‚
â”‚  â”‚   ...                 â”‚  â”‚  ğŸ’­ æ­£åœ¨æœç´¢åˆ›å§‹äººèƒŒæ™¯...  â”‚   â”‚
â”‚  â”‚                       â”‚  â”‚  ğŸ” å·²æ‰¾åˆ°3æ¡LinkedInè®°å½• â”‚   â”‚
â”‚  â”‚                       â”‚  â”‚  âœ“ éªŒè¯å®Œæˆ              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                          â”‚   â”‚
â”‚                             â”‚  [MarketAgent]           â”‚   â”‚
â”‚                             â”‚  ğŸ’­ æ­£åœ¨åˆ†æå¸‚åœºè§„æ¨¡...    â”‚   â”‚
â”‚                             â”‚  ğŸ“Š TAM: $5.2B           â”‚   â”‚
â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®å…ƒç´ **:
- âœ… å³ä¾§åŠ¨æ€é¢æ¿
- âœ… å®æ—¶æ‰“å­—æ•ˆæœ
- âœ… AgentçŠ¶æ€åŠ¨ç”»
- âœ… ä¸­é—´ç»“æœé¢„è§ˆ
- âœ… æ•°æ®å¯è§†åŒ–

#### 3.2 æ¸è¿›å¼ä¿¡æ¯å±•ç¤º

**ç¤ºä¾‹**:
```
[MarketAgent] å¼€å§‹åˆ†æ...
  â†“
ğŸ’­ æ­£åœ¨æœç´¢å¸‚åœºæ•°æ®...
  â†“
ğŸ“Š æ‰¾åˆ°å¸‚åœºæŠ¥å‘Š:
  - IDC 2024 AIå¸‚åœºæŠ¥å‘Š
  - Gartner äº‘æœåŠ¡é¢„æµ‹
  â†“
ğŸ’¡ å…³é”®å‘ç°:
  - TAM: $52B (2024)
  - CAGR: 34.5%
  â†“
âœ“ å¸‚åœºåˆ†æå®Œæˆ
```

---

### æ”¹è¿›4: æ™ºèƒ½æ„å›¾è¯†åˆ« âœ…

**å¯¹è¯å¼äº¤äº’**:

**åœºæ™¯1: æ„å›¾è¯†åˆ«**
```
ç”¨æˆ·: "æ°´æ‰æ™ºç®—æ€ä¹ˆæ ·ï¼Ÿ"

ç³»ç»Ÿ:
ğŸ¤” æˆ‘ç†è§£æ‚¨æƒ³äº†è§£æ°´æ‰æ™ºç®—ï¼ˆæ·±åœ³ï¼‰æŠ€æœ¯æœ‰é™å…¬å¸ã€‚
æˆ‘å¯ä»¥ä¸ºæ‚¨ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ è¯·é€‰æ‹©æœåŠ¡ç±»å‹:                    â”‚
â”‚                                     â”‚
â”‚ [ ğŸ“Š å®Œæ•´æŠ•èµ„å°½è°ƒåˆ†æ ]               â”‚
â”‚   â€¢ å›¢é˜Ÿ/å¸‚åœº/é£é™©å…¨é¢åˆ†æ             â”‚
â”‚   â€¢ ç”ŸæˆæŠ•èµ„å¤‡å¿˜å½•                    â”‚
â”‚   â€¢ é¢„è®¡è€—æ—¶: 3-5åˆ†é’Ÿ                â”‚
â”‚                                     â”‚
â”‚ [ âš¡ å¿«é€Ÿæ¦‚è§ˆ ]                       â”‚
â”‚   â€¢ å…¬å¸åŸºæœ¬ä¿¡æ¯                      â”‚
â”‚   â€¢ å…³é”®äº®ç‚¹ä¸é£é™©                    â”‚
â”‚   â€¢ é¢„è®¡è€—æ—¶: 30ç§’                   â”‚
â”‚                                     â”‚
â”‚ [ ğŸ’¬ è‡ªç”±å¯¹è¯ ]                       â”‚
â”‚   â€¢ é—®æˆ‘ä»»ä½•é—®é¢˜                      â”‚
â”‚   â€¢ æŒ‰éœ€æ·±å…¥åˆ†æ                      â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ æˆ–è€…ï¼Œæ‚¨å¯ä»¥ä¸Šä¼ BPæ–‡ä»¶è·å¾—æ›´ç²¾å‡†åˆ†æ
```

**åœºæ™¯2: å¤šè½®å¯¹è¯**
```
ç”¨æˆ·: "å…ˆèŠèŠå§"

ç³»ç»Ÿ:
å¥½çš„ï¼æ°´æ‰æ™ºç®—æ˜¯ä¸€å®¶ä¸“æ³¨äºAIç®—åŠ›çš„å…¬å¸ã€‚
æ ¹æ®å…¬å¼€ä¿¡æ¯ï¼Œä»–ä»¬ä¸»è¦åšï¼š
- é«˜æ€§èƒ½GPUäº‘æœåŠ¡
- AIè®­ç»ƒå¹³å°
- æˆç«‹äº2023å¹´

æ‚¨æƒ³äº†è§£å“ªæ–¹é¢ï¼Ÿ
[ å›¢é˜ŸèƒŒæ™¯ ] [ å¸‚åœºç«äº‰ ] [ èèµ„æƒ…å†µ ] [ æŠ€æœ¯å£å’ ]

---

ç”¨æˆ·: "å›¢é˜ŸèƒŒæ™¯"

ç³»ç»Ÿ:
ğŸ’­ æ­£åœ¨æœç´¢åˆ›å§‹å›¢é˜Ÿä¿¡æ¯...
[å³ä¾§Agenté¢æ¿å±•ç¤ºæœç´¢è¿‡ç¨‹]
...
```

**åœºæ™¯3: ç¡®è®¤ååˆ†æ**
```
ç”¨æˆ·: "è¿›è¡Œå®Œæ•´å°½è°ƒ"

ç³»ç»Ÿ:
å¥½çš„ï¼æˆ‘å°†å¯åŠ¨å®Œæ•´çš„æŠ•èµ„å°½è°ƒæµç¨‹ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¯ åˆ†æè®¡åˆ’:                     â”‚
â”‚                                 â”‚
â”‚ âœ“ æ–‡æ¡£è§£æ (å¦‚æœ‰)                â”‚
â”‚ âœ“ å›¢é˜ŸèƒŒæ™¯è°ƒæŸ¥                   â”‚
â”‚ âœ“ å¸‚åœºåˆ†æ                       â”‚
â”‚ âœ“ é£é™©è¯„ä¼°                       â”‚
â”‚ âœ“ ç”ŸæˆæŠ•èµ„å¤‡å¿˜å½•                 â”‚
â”‚                                 â”‚
â”‚ é¢„è®¡è€—æ—¶: 3-5åˆ†é’Ÿ                â”‚
â”‚                                 â”‚
â”‚ [ å¼€å§‹åˆ†æ ] [ å–æ¶ˆ ]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ åŠŸèƒ½è®¾è®¡

### åŠŸèƒ½1: æ™ºèƒ½å¯¹è¯ä¸­å¿ƒ

#### 1.1 æ„å›¾è¯†åˆ«å¼•æ“

**æŠ€æœ¯å®ç°**:
```python
class IntentRecognizer:
    """æ„å›¾è¯†åˆ«å™¨"""

    INTENTS = {
        "dd_analysis": {  # æŠ•èµ„å°½è°ƒ
            "keywords": ["åˆ†æ", "å°½è°ƒ", "DD", "æŠ•èµ„"],
            "patterns": [
                r".*åˆ†æ.*å…¬å¸",
                r".*å°½è°ƒ.*",
                r".*æŠ•èµ„.*å»ºè®®"
            ]
        },
        "quick_overview": {  # å¿«é€Ÿæ¦‚è§ˆ
            "keywords": ["å¿«é€Ÿ", "ç®€å•", "æ¦‚è§ˆ"],
            "patterns": [r".*å¿«é€Ÿ.*äº†è§£", r".*ç®€å•.*ä»‹ç»"]
        },
        "free_chat": {  # è‡ªç”±å¯¹è¯
            "keywords": ["èŠèŠ", "é—®", "äº†è§£"],
            "patterns": [r".*èŠ.*", r".*æ€ä¹ˆæ ·"]
        },
        "add_material": {  # æ·»åŠ ææ–™
            "keywords": ["è¡¥å……", "æ·»åŠ ", "ä¸Šä¼ ", "æ–°ææ–™"],
            "patterns": [r".*è¡¥å…….*ææ–™", r".*æ·»åŠ .*ä¿¡æ¯"]
        }
    }

    async def recognize(self, user_input: str) -> Intent:
        """è¯†åˆ«ç”¨æˆ·æ„å›¾"""
        # 1. å…³é”®è¯åŒ¹é…
        # 2. æ­£åˆ™æ¨¡å¼åŒ¹é…
        # 3. LLMæ·±åº¦ç†è§£
        # 4. ç½®ä¿¡åº¦è¯„åˆ†
        pass
```

#### 1.2 å¼•å¯¼å¼äº¤äº’ç»„ä»¶

**UIç»„ä»¶**:
```vue
<!-- IntentSelector.vue -->
<template>
  <div class="intent-selector">
    <div class="intent-header">
      <span class="icon">ğŸ¤”</span>
      <p>æˆ‘ç†è§£æ‚¨æƒ³äº†è§£ <strong>{{ companyName }}</strong></p>
      <p class="subtitle">æˆ‘å¯ä»¥ä¸ºæ‚¨ï¼š</p>
    </div>

    <div class="intent-options">
      <button
        v-for="option in options"
        :key="option.id"
        @click="selectIntent(option)"
        class="intent-card"
      >
        <div class="icon">{{ option.icon }}</div>
        <div class="title">{{ option.title }}</div>
        <div class="description">{{ option.description }}</div>
        <div class="meta">
          <span class="time">â±ï¸ {{ option.estimatedTime }}</span>
        </div>
      </button>
    </div>

    <div class="upload-hint">
      <Upload /> æˆ–ä¸Šä¼ BPæ–‡ä»¶è·å¾—æ›´ç²¾å‡†åˆ†æ
    </div>
  </div>
</template>
```

---

### åŠŸèƒ½2: åŠ¨æ€åˆ†æçœ‹æ¿

#### 2.1 å³ä¾§Agentå·¥ä½œé¢æ¿

**ç»„ä»¶ç»“æ„**:
```vue
<!-- AgentWorkPanel.vue -->
<template>
  <div class="agent-work-panel">
    <!-- Agentåˆ—è¡¨ -->
    <div
      v-for="agent in activeAgents"
      :key="agent.id"
      class="agent-card"
      :class="{
        'is-thinking': agent.status === 'thinking',
        'is-done': agent.status === 'done'
      }"
    >
      <!-- Agentå¤´éƒ¨ -->
      <div class="agent-header">
        <div class="avatar">{{ agent.icon }}</div>
        <div class="info">
          <div class="name">{{ agent.name }}</div>
          <div class="status">
            <StatusIndicator :status="agent.status" />
            {{ agent.statusText }}
          </div>
        </div>
      </div>

      <!-- æ€è€ƒè¿‡ç¨‹ -->
      <div v-if="agent.status === 'thinking'" class="thinking">
        <div class="thought-bubble">
          ğŸ’­ {{ agent.currentThought }}
        </div>
        <div class="progress">
          <ProgressBar :value="agent.progress" />
        </div>
      </div>

      <!-- ä¸­é—´ç»“æœ -->
      <div v-if="agent.intermediateResults.length > 0" class="results">
        <div
          v-for="result in agent.intermediateResults"
          :key="result.id"
          class="result-item"
        >
          <span class="icon">{{ result.icon }}</span>
          <span class="text">{{ result.text }}</span>
        </div>
      </div>

      <!-- æœ€ç»ˆç»“æœé¢„è§ˆ -->
      <div v-if="agent.status === 'done'" class="final-result">
        <div class="checkmark">âœ“</div>
        <div class="summary">{{ agent.summary }}</div>
      </div>
    </div>
  </div>
</template>
```

#### 2.2 å®æ—¶æ•°æ®æµ

**WebSocketæ¶ˆæ¯æ ¼å¼**:
```typescript
interface AgentUpdateMessage {
  type: 'agent_update';
  agent_id: string;
  agent_name: string;
  status: 'started' | 'thinking' | 'searching' | 'analyzing' | 'done';
  current_thought?: string;  // "æ­£åœ¨æœç´¢åˆ›å§‹äººLinkedIn..."
  progress?: number;  // 0-100
  intermediate_result?: {
    type: 'data' | 'insight' | 'warning';
    icon: string;
    text: string;
    data?: any;
  };
  final_result?: {
    summary: string;
    full_content: string;
  };
}
```

**å‰ç«¯æ¥æ”¶é€»è¾‘**:
```typescript
// ChatView.vue
ws.onmessage = (event) => {
  const message = JSON.parse(event.data);

  if (message.type === 'agent_update') {
    updateAgentPanel(message);
  }
};

function updateAgentPanel(update: AgentUpdateMessage) {
  const agent = findOrCreateAgent(update.agent_id);

  agent.status = update.status;
  agent.currentThought = update.current_thought;
  agent.progress = update.progress;

  if (update.intermediate_result) {
    agent.intermediateResults.push(update.intermediate_result);

    // åŠ¨ç”»æ•ˆæœ
    scrollToLatestResult(agent.id);
  }

  if (update.status === 'done') {
    agent.summary = update.final_result.summary;
    playCompletionAnimation(agent.id);
  }
}
```

---

### åŠŸèƒ½3: IMè¿­ä»£é—­ç¯

#### 3.1 æ·»åŠ ææ–™å…¥å£

**è®¾è®¡**:
```vue
<!-- IMå·¥ä½œå°å³ä¾§å·¥å…·æ  -->
<div class="im-toolbar">
  <button @click="openAddMaterial" class="tool-button">
    <Plus />
    æ·»åŠ ææ–™
  </button>

  <button @click="askAgent" class="tool-button">
    <MessageCircle />
    è¯¢é—®Agent
  </button>

  <button @click="regenerateSection" class="tool-button">
    <RefreshCw />
    é‡æ–°ç”Ÿæˆ
  </button>
</div>

<!-- æ·»åŠ ææ–™å¯¹è¯æ¡† -->
<Dialog v-model="showAddMaterial">
  <div class="add-material-dialog">
    <h3>æ·»åŠ è¡¥å……ææ–™</h3>

    <Tabs>
      <Tab label="è®¿è°ˆçºªè¦">
        <textarea v-model="interviewNotes" />
      </Tab>

      <Tab label="ä¸Šä¼ æ–‡æ¡£">
        <FileUpload @upload="handleUpload" />
      </Tab>

      <Tab label="å¤–éƒ¨é“¾æ¥">
        <input v-model="externalUrl" placeholder="è¾“å…¥é“¾æ¥..." />
      </Tab>
    </Tabs>

    <div class="actions">
      <button @click="submitMaterial">æäº¤å¹¶é‡æ–°åˆ†æ</button>
      <button @click="close">å–æ¶ˆ</button>
    </div>
  </div>
</Dialog>
```

#### 3.2 è¿­ä»£åˆ†ææµç¨‹

**åç«¯API**:
```python
@app.post("/api/v1/dd/{session_id}/iterate")
async def iterate_analysis(
    session_id: str,
    material: IterationMaterial
):
    """è¿­ä»£åˆ†æï¼šæ·»åŠ æ–°ææ–™åé‡æ–°åˆ†æ"""

    # 1. è·å–åŸæœ‰context
    context = get_dd_context(session_id)

    # 2. æ·»åŠ æ–°ææ–™
    if material.type == "interview_notes":
        context.additional_materials.append({
            "type": "interview",
            "content": material.content,
            "timestamp": datetime.now()
        })
    elif material.type == "document":
        # è§£ææ–°æ–‡æ¡£
        parsed = await parse_document(material.file)
        context.additional_materials.append(parsed)

    # 3. é‡æ–°è¿è¡Œç›¸å…³Agent
    affected_agents = identify_affected_agents(material.type)

    for agent_type in affected_agents:
        new_result = await run_agent(agent_type, context)
        context.update_section(agent_type, new_result)

    # 4. é‡æ–°ç”ŸæˆIM
    updated_im = await generate_updated_im(context)

    return {
        "session_id": session_id,
        "updated_im": updated_im,
        "changes": get_diff(context.preliminary_im, updated_im)
    }
```

#### 3.3 ç‰ˆæœ¬ç®¡ç†

**æ•°æ®æ¨¡å‹**:
```python
class IMVersion(BaseModel):
    version_number: int
    created_at: datetime
    created_by: str
    changes: List[Change]
    im_content: PreliminaryIM

class Change(BaseModel):
    section: str
    change_type: str  # "added", "modified", "deleted"
    old_value: str
    new_value: str
    reason: str  # "ç”¨æˆ·æ·»åŠ è®¿è°ˆçºªè¦"

class IMVersionManager:
    """IMç‰ˆæœ¬ç®¡ç†å™¨"""

    async def save_version(
        self,
        session_id: str,
        im: PreliminaryIM,
        changes: List[Change]
    ) -> IMVersion:
        """ä¿å­˜æ–°ç‰ˆæœ¬"""
        pass

    async def list_versions(self, session_id: str) -> List[IMVersion]:
        """åˆ—å‡ºæ‰€æœ‰ç‰ˆæœ¬"""
        pass

    async def rollback(self, session_id: str, version: int) -> PreliminaryIM:
        """å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬"""
        pass

    async def compare(self, version1: int, version2: int) -> Dict:
        """å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬"""
        pass
```

---

### åŠŸèƒ½4: è§†å›¾é‡æ„

#### 4.1 æ–°è§†å›¾æ¶æ„

**å¯¼èˆªç»“æ„**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– Magellan AI æŠ•ç ”å·¥ä½œå°                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                â”‚
â”‚  ğŸ’¬  æ™ºèƒ½å¯¹è¯    (ä¸»å·¥ä½œåŒº)                      â”‚
â”‚  ğŸ“Š  åˆ†æçœ‹æ¿    (è¿›è¡Œä¸­çš„åˆ†æ)                   â”‚
â”‚  ğŸ“  IMå·¥ä½œå°    (ç¼–è¾‘æŠ•èµ„å¤‡å¿˜å½•)                 â”‚
â”‚  ğŸ—‚ï¸  é¡¹ç›®åº“      (å†å²é¡¹ç›®ç®¡ç†)                  â”‚
â”‚  ğŸ­  æœºæ„ç”»åƒ    (ä¿ç•™)                          â”‚
â”‚                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.2 æ™ºèƒ½å¯¹è¯è§†å›¾

**å¸ƒå±€**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ æ™ºèƒ½å¯¹è¯                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚  ğŸ¤– Agentå·¥ä½œé¢æ¿              â”‚
â”‚  å¯¹è¯å†å²                     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚  [TeamAgent]         â”‚   â”‚
â”‚  â”‚ ç”¨æˆ·: åˆ†æXXå…¬å¸   â”‚      â”‚  â”‚  ğŸ’­ æœç´¢åˆ›å§‹äºº...     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ AI: å¥½çš„ï¼Œæˆ‘å¯ä»¥... â”‚      â”‚  â”‚  [MarketAgent]       â”‚   â”‚
â”‚  â”‚ [å®Œæ•´DD] [å¿«é€Ÿ]    â”‚      â”‚  â”‚  ğŸ“Š åˆ†æå¸‚åœºè§„æ¨¡...   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  ...                        â”‚                              â”‚
â”‚                             â”‚  ğŸ“ ç›¸å…³èµ„æ–™                  â”‚
â”‚                             â”‚  - è¡Œä¸šæŠ¥å‘Š.pdf              â”‚
â”‚                             â”‚  - ç«å“åˆ†æ.xlsx             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ’¬ [è¾“å…¥æ¶ˆæ¯...]                              ğŸ“ [ä¸Šä¼ ]    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ºï¸ å®æ–½è·¯çº¿å›¾

### Phase 1: æ ¸å¿ƒæ¶æ„é‡æ„ (2-3å‘¨)

#### Sprint 1: æ„å›¾è¯†åˆ«ä¸å¯¹è¯å¼•æ“
**ç›®æ ‡**: å®ç°æ™ºèƒ½å¯¹è¯èƒ½åŠ›

**ä»»åŠ¡**:
- [ ] åˆ›å»ºIntentRecognizerç»„ä»¶
- [ ] å®ç°æ„å›¾åˆ†ç±»æ¨¡å‹
- [ ] è®¾è®¡å¯¹è¯çŠ¶æ€æœº
- [ ] å¼€å‘å¼•å¯¼å¼UIç»„ä»¶

**äº¤ä»˜ç‰©**:
- âœ… æ„å›¾è¯†åˆ«å‡†ç¡®ç‡ >85%
- âœ… 3ç§å¯¹è¯æ¨¡å¼(å®Œæ•´DD/å¿«é€Ÿ/è‡ªç”±)
- âœ… ç”¨æˆ·ç¡®è®¤æµç¨‹

---

#### Sprint 2: åŠ¨æ€Agenté¢æ¿
**ç›®æ ‡**: å®æ—¶å±•ç¤ºAgentå·¥ä½œè¿‡ç¨‹

**ä»»åŠ¡**:
- [ ] è®¾è®¡Agenté€šä¿¡åè®®
- [ ] å¼€å‘å³ä¾§åŠ¨æ€é¢æ¿UI
- [ ] å®ç°WebSocketå®æ—¶æ¨é€
- [ ] æ·»åŠ åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ

**äº¤ä»˜ç‰©**:
- âœ… Agentå·¥ä½œçŠ¶æ€å®æ—¶å±•ç¤º
- âœ… ä¸­é—´ç»“æœæ¸è¿›å¼æ˜¾ç¤º
- âœ… æµç•…çš„åŠ¨ç”»æ•ˆæœ

---

### Phase 2: è¿­ä»£é—­ç¯ (2-3å‘¨)

#### Sprint 3: ææ–™æ·»åŠ ä¸è¿­ä»£åˆ†æ
**ç›®æ ‡**: æ”¯æŒæ·»åŠ ææ–™å’Œé‡æ–°åˆ†æ

**ä»»åŠ¡**:
- [ ] å¼€å‘"æ·»åŠ ææ–™"å¯¹è¯æ¡†
- [ ] å®ç°è¿­ä»£åˆ†æAPI
- [ ] æ”¯æŒå¤šç§ææ–™ç±»å‹(æ–‡æœ¬/æ–‡æ¡£/é“¾æ¥)
- [ ] å·®å¼‚å¯¹æ¯”å’Œé«˜äº®

**äº¤ä»˜ç‰©**:
- âœ… ç”¨æˆ·å¯æ·»åŠ è®¿è°ˆçºªè¦
- âœ… å¯ä¸Šä¼ è¡¥å……æ–‡æ¡£
- âœ… è‡ªåŠ¨é‡æ–°åˆ†æç›¸å…³éƒ¨åˆ†
- âœ… å±•ç¤ºå˜æ›´diff

---

#### Sprint 4: IMç‰ˆæœ¬ç®¡ç†
**ç›®æ ‡**: ç‰ˆæœ¬æ§åˆ¶å’Œå›æ»š

**ä»»åŠ¡**:
- [ ] è®¾è®¡ç‰ˆæœ¬æ•°æ®æ¨¡å‹
- [ ] å®ç°ç‰ˆæœ¬ä¿å­˜å’Œåˆ—è¡¨
- [ ] å¼€å‘ç‰ˆæœ¬å¯¹æ¯”UI
- [ ] æ”¯æŒå›æ»šåŠŸèƒ½

**äº¤ä»˜ç‰©**:
- âœ… æ¯æ¬¡è¿­ä»£è‡ªåŠ¨ä¿å­˜ç‰ˆæœ¬
- âœ… å¯æŸ¥çœ‹å†å²ç‰ˆæœ¬
- âœ… å¯å›æ»šåˆ°ä»»æ„ç‰ˆæœ¬
- âœ… ç‰ˆæœ¬å¯¹æ¯”å¯è§†åŒ–

---

### Phase 3: è§†å›¾é‡æ„ (1-2å‘¨)

#### Sprint 5: æ–°è§†å›¾æ¶æ„
**ç›®æ ‡**: é‡æ„å¯¼èˆªå’Œè§†å›¾

**ä»»åŠ¡**:
- [ ] ç§»é™¤"æŠ¥å‘Šè§†å›¾"
- [ ] é‡å‘½å"ä»»åŠ¡é©¾é©¶èˆ±"ä¸º"æ™ºèƒ½å¯¹è¯"
- [ ] åˆ›å»º"åˆ†æçœ‹æ¿"è§†å›¾
- [ ] åˆ›å»º"é¡¹ç›®åº“"è§†å›¾

**äº¤ä»˜ç‰©**:
- âœ… æ¸…æ™°çš„è§†å›¾å®šä½
- âœ… æ— åŠŸèƒ½é‡å¤
- âœ… ç›´è§‚çš„å¯¼èˆªç»“æ„

---

### Phase 4: UXä¼˜åŒ– (1å‘¨)

#### Sprint 6: ç»†èŠ‚æ‰“ç£¨
**ç›®æ ‡**: æå‡æ•´ä½“ç”¨æˆ·ä½“éªŒ

**ä»»åŠ¡**:
- [ ] æ·»åŠ åŠ è½½éª¨æ¶å±
- [ ] ä¼˜åŒ–åŠ¨ç”»å’Œè¿‡æ¸¡
- [ ] å®Œå–„é”™è¯¯æç¤º
- [ ] æ·»åŠ æ“ä½œå¼•å¯¼

**äº¤ä»˜ç‰©**:
- âœ… æµç•…çš„äº¤äº’ä½“éªŒ
- âœ… å‹å¥½çš„é”™è¯¯å¤„ç†
- âœ… æ–°æ‰‹å¼•å¯¼æµç¨‹

---

## ğŸ› ï¸ æŠ€æœ¯æ–¹æ¡ˆ

### 1. æ„å›¾è¯†åˆ«å¼•æ“

**æ–¹æ¡ˆé€‰æ‹©**:

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨èåº¦ |
|------|------|------|--------|
| **å…³é”®è¯åŒ¹é…** | ç®€å•å¿«é€Ÿ | å‡†ç¡®ç‡ä½ | â­â­ |
| **æ­£åˆ™+è§„åˆ™** | å¯æ§æ€§å¼º | ç»´æŠ¤æˆæœ¬é«˜ | â­â­â­ |
| **LLMåˆ†ç±»** | å‡†ç¡®ç‡é«˜ï¼Œçµæ´» | å»¶è¿Ÿï¼Œæˆæœ¬ | â­â­â­â­ |
| **æ··åˆæ–¹æ¡ˆ** | å¹³è¡¡æ€§èƒ½å’Œå‡†ç¡®ç‡ | å®ç°å¤æ‚ | â­â­â­â­â­ |

**æ¨è: æ··åˆæ–¹æ¡ˆ**

```python
class HybridIntentRecognizer:
    """æ··åˆæ„å›¾è¯†åˆ«å™¨"""

    async def recognize(self, text: str) -> IntentResult:
        # Step 1: å¿«é€Ÿå…³é”®è¯åŒ¹é… (< 10ms)
        keyword_result = self.keyword_matcher.match(text)
        if keyword_result.confidence > 0.9:
            return keyword_result

        # Step 2: æ­£åˆ™è§„åˆ™åŒ¹é… (< 20ms)
        regex_result = self.regex_matcher.match(text)
        if regex_result.confidence > 0.85:
            return regex_result

        # Step 3: LLMæ·±åº¦ç†è§£ (~ 200-500ms)
        llm_result = await self.llm_classifier.classify(text)
        return llm_result
```

---

### 2. å®æ—¶Agenté€šä¿¡

**æ¶æ„**:
```
Agent (Backend) â†’ EventBus â†’ WebSocket â†’ Frontend
```

**EventBusè®¾è®¡**:
```python
class AgentEventBus:
    """Agentäº‹ä»¶æ€»çº¿"""

    def __init__(self):
        self.subscribers: Dict[str, List[Callable]] = {}

    def publish(self, event: AgentEvent):
        """å‘å¸ƒäº‹ä»¶"""
        for subscriber in self.subscribers.get(event.type, []):
            asyncio.create_task(subscriber(event))

    def subscribe(self, event_type: str, callback: Callable):
        """è®¢é˜…äº‹ä»¶"""
        if event_type not in self.subscribers:
            self.subscribers[event_type] = []
        self.subscribers[event_type].append(callback)

# Agentå‘é€äº‹ä»¶
class TeamAnalysisAgent:
    def __init__(self, event_bus: AgentEventBus):
        self.event_bus = event_bus

    async def analyze(self, context):
        # å‘é€å¼€å§‹äº‹ä»¶
        self.event_bus.publish(AgentEvent(
            type="agent_started",
            agent_id="team_analysis",
            agent_name="å›¢é˜Ÿåˆ†æAgent"
        ))

        # å‘é€æ€è€ƒè¿‡ç¨‹
        self.event_bus.publish(AgentEvent(
            type="agent_thinking",
            agent_id="team_analysis",
            thought="æ­£åœ¨æœç´¢åˆ›å§‹äººLinkedIn..."
        ))

        # æœç´¢...
        results = await self.search_linkedin(...)

        # å‘é€ä¸­é—´ç»“æœ
        self.event_bus.publish(AgentEvent(
            type="agent_intermediate_result",
            agent_id="team_analysis",
            result={
                "icon": "ğŸ”",
                "text": f"æ‰¾åˆ°{len(results)}æ¡LinkedInè®°å½•"
            }
        ))

        # ...ç»§ç»­åˆ†æ
```

---

### 3. ç‰ˆæœ¬ç®¡ç†å­˜å‚¨

**æ–¹æ¡ˆ: å¢é‡å­˜å‚¨**

```python
class IMVersionStore:
    """IMç‰ˆæœ¬å­˜å‚¨ï¼ˆä½¿ç”¨å¢é‡æ–¹å¼èŠ‚çœç©ºé—´ï¼‰"""

    async def save_version(self, session_id: str, new_im: IM):
        # 1. è·å–ä¸Šä¸€ç‰ˆæœ¬
        prev_version = await self.get_latest_version(session_id)

        # 2. è®¡ç®—diff
        diff = compute_diff(prev_version.content, new_im)

        # 3. åªå­˜å‚¨diffï¼ˆèŠ‚çœç©ºé—´ï¼‰
        version = IMVersion(
            version_number=prev_version.version_number + 1,
            created_at=datetime.now(),
            diff=diff,  # åªå­˜å·®å¼‚ï¼
            full_content=None  # ä¸å­˜å®Œæ•´å†…å®¹
        )

        await self.db.save(version)

    async def reconstruct_version(self, session_id: str, version: int):
        """é‡å»ºæŒ‡å®šç‰ˆæœ¬ï¼ˆä»diffé‡å»ºï¼‰"""
        # 1. è·å–æ‰€æœ‰ç‰ˆæœ¬åˆ°ç›®æ ‡ç‰ˆæœ¬
        versions = await self.db.query(
            session_id=session_id,
            version__lte=version
        ).order_by('version')

        # 2. ä»ç¬¬ä¸€ä¸ªç‰ˆæœ¬å¼€å§‹åº”ç”¨diff
        content = versions[0].full_content  # ç¬¬ä¸€ä¸ªç‰ˆæœ¬å­˜å®Œæ•´
        for v in versions[1:]:
            content = apply_diff(content, v.diff)

        return content
```

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### ç”¨æˆ·ä½“éªŒæå‡

| æŒ‡æ ‡ | V3 | V4ç›®æ ‡ | æ”¹è¿›å¹…åº¦ |
|------|----|----|----------|
| æ„å›¾ç†è§£å‡†ç¡®ç‡ | 0% (æ— è¯†åˆ«) | 85%+ | âˆ |
| ç”¨æˆ·æ“ä½œå¼•å¯¼ | æ—  | å®Œæ•´ | âˆ |
| è¿­ä»£èƒ½åŠ› | æ—  | æ”¯æŒå¤šè½® | âˆ |
| å®æ—¶åé¦ˆ | é™æ€æ­¥éª¤ | åŠ¨æ€å±•ç¤º | +200% |
| ç©ºé—´åˆ©ç”¨ç‡ | ~40% | ~85% | +112% |

### äº§å“å®Œæ•´åº¦

- âœ… é€»è¾‘é—­ç¯: 0% â†’ 100%
- âœ… åŠŸèƒ½æ¸…æ™°åº¦: 60% â†’ 95%
- âœ… äº¤äº’æ™ºèƒ½åº¦: 20% â†’ 90%
- âœ… è§†è§‰å¸å¼•åŠ›: 50% â†’ 85%

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

### å¿…é¡»è¾¾æˆ (Must Have)
- [ ] ç”¨æˆ·å¯é€‰æ‹©åˆ†æç±»å‹ï¼ˆä¸å†å¼ºåˆ¶è¿›å…¥DDï¼‰
- [ ] Agentå·¥ä½œè¿‡ç¨‹å®æ—¶å¯è§
- [ ] IMç”Ÿæˆåå¯ç»§ç»­æ·»åŠ ææ–™
- [ ] æ”¯æŒç‰ˆæœ¬ç®¡ç†å’Œå›æ»š

### åº”è¯¥è¾¾æˆ (Should Have)
- [ ] æ„å›¾è¯†åˆ«å‡†ç¡®ç‡ >85%
- [ ] å³ä¾§é¢æ¿åŠ¨ç”»æµç•…ï¼ˆ60fpsï¼‰
- [ ] å¤šè½®å¯¹è¯è‡ªç„¶æµç•…
- [ ] UIç¾è§‚ä¸“ä¸š

### å¯ä»¥è¾¾æˆ (Could Have)
- [ ] AIä¸»åŠ¨æå‡ºåˆ†æå»ºè®®
- [ ] æ™ºèƒ½æ‘˜è¦å’Œé«˜äº®
- [ ] å¤šäººåä½œç¼–è¾‘IM
- [ ] ç§»åŠ¨ç«¯é€‚é…

---

## ğŸ“ é™„å½•

### A. ç«å“åˆ†æ

**ChatGPT**:
- âœ… æµç•…çš„å¯¹è¯ä½“éªŒ
- âœ… å®æ—¶æ‰“å­—æ•ˆæœ
- âœ… æ¸…æ™°çš„æ€è€ƒè¿‡ç¨‹

**Perplexity**:
- âœ… æœç´¢æºå®æ—¶å±•ç¤º
- âœ… å¼•ç”¨å¯ç‚¹å‡»æŸ¥çœ‹
- âœ… ç›¸å…³é—®é¢˜æ¨è

**Claude Code**:
- âœ… æ€è€ƒæ ‡ç­¾å¯è§
- âœ… å·¥å…·ä½¿ç”¨è¿‡ç¨‹å±•ç¤º
- âœ… ä»£ç æ‰§è¡Œç»“æœå†…è”

### B. ç”¨æˆ·æ—…ç¨‹åœ°å›¾

**V4ç”¨æˆ·æ—…ç¨‹**:
```
1. æ‰“å¼€åº”ç”¨ â†’ æ™ºèƒ½å¯¹è¯é¡µé¢
2. è¾“å…¥: "åˆ†æXXå…¬å¸"
3. AIè¯†åˆ«æ„å›¾ â†’ æä¾›é€‰é¡¹
4. ç”¨æˆ·é€‰æ‹©: "å®Œæ•´DDåˆ†æ"
5. ç¡®è®¤ â†’ å¼€å§‹åˆ†æ
6. å®æ—¶çœ‹åˆ°:
   - å³ä¾§Agentå·¥ä½œé¢æ¿
   - æ¯ä¸ªAgentçš„æ€è€ƒè¿‡ç¨‹
   - ä¸­é—´ç»“æœé€æ­¥æ˜¾ç¤º
7. 3-5åˆ†é’Ÿå â†’ IMåˆç¨¿å®Œæˆ
8. ç”¨æˆ·ç‚¹å‡»"æ·»åŠ ææ–™"
9. ä¸Šä¼ è®¿è°ˆçºªè¦
10. ç³»ç»Ÿé‡æ–°åˆ†æç›¸å…³éƒ¨åˆ†
11. å±•ç¤ºå˜æ›´diff
12. ç”¨æˆ·ç¡®è®¤ â†’ æ›´æ–°IM
13. ç»§ç»­å¯¹è¯: "ä¼°å€¼å¦‚ä½•ï¼Ÿ"
14. AIè°ƒç”¨ä¼°å€¼Agent â†’ è¡¥å……ä¼°å€¼ç« èŠ‚
15. ç”¨æˆ·æ»¡æ„ â†’ å¯¼å‡ºWord
16. å®Œæˆ â†’ å½’æ¡£åˆ°é¡¹ç›®åº“
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-10-26
**è´Ÿè´£äºº**: äº§å“å›¢é˜Ÿ + æŠ€æœ¯å›¢é˜Ÿ
**ä¸‹ä¸€æ­¥**: è¯„å®¡å¹¶å¯åŠ¨Sprint 1
