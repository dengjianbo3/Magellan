# V4 - 智能投研助手升级版

**版本**: V4.0
**状态**: 📋 规划中
**预计启动**: 待评审
**预计周期**: 6-9周

---

## 📚 文档导航

### 核心文档

1. **[V4 Executive Summary](V4_Executive_Summary.md)** ⭐ 必读
   - V4一句话总结
   - V3的4个核心问题
   - V4的4大改进
   - 实施计划和预期收益

2. **[V4 Product Analysis and Plan](V4_Product_Analysis_and_Plan.md)** 📖 详细设计
   - 完整问题分析
   - 详细功能设计
   - 技术方案
   - 实施路线图

---

## 🎯 V4核心主题

### 从"分析工具"到"智能助手"

**V3**: 单向的分析工具
```
用户输入 → 分析 → 输出报告 → [结束]
```

**V4**: 智能对话式助手
```
用户对话 ⇄ AI理解意图 ⇄ 引导选择
    ↓
  分析过程 (实时可见)
    ↓
  初步IM ⇄ 添加材料 ⇄ 迭代优化
    ↓
  完整IM → 导出/归档
```

---

## 🔑 四大核心改进

### 1️⃣ 完整迭代闭环
**解决**: IM生成后无法继续优化的问题

**新能力**:
- ✅ 随时添加访谈纪要、补充文档
- ✅ 自动重新分析相关部分
- ✅ 版本管理，可回滚
- ✅ 变更diff可视化

---

### 2️⃣ 智能对话交互
**解决**: 强制进入分析流程，无意图识别

**新能力**:
- ✅ AI识别用户意图 (准确率85%+)
- ✅ 提供多种选项供用户选择
- ✅ 用户确认后才启动分析
- ✅ 支持自由对话模式

---

### 3️⃣ 实时动态反馈
**解决**: 界面简陋，看不到Agent工作过程

**新能力**:
- ✅ 右侧Agent工作面板
- ✅ 实时展示思考过程
- ✅ 中间结果渐进式显示
- ✅ 流畅动画和过渡效果
- ✅ 空间利用率提升112%

---

### 4️⃣ 清晰视图架构
**解决**: 功能混乱，视图重复

**新架构**:
```
💬 智能对话  - 主工作区，对话+意图识别
📊 分析看板  - 进行中的分析，实时Agent展示
📝 IM工作台  - 编辑备忘录，迭代优化
🗂️ 项目库    - 历史项目，搜索归档
🎭 机构画像  - 保留
```

**移除**: 报告视图、任务驾驶舱(功能重复)

---

## 📅 开发计划

### Phase 1: 核心架构 (2-3周)
- Sprint 1: 意图识别与对话引擎
- Sprint 2: 动态Agent面板

### Phase 2: 迭代闭环 (2-3周)
- Sprint 3: 材料添加与迭代分析
- Sprint 4: IM版本管理

### Phase 3: 视图重构 (1-2周)
- Sprint 5: 新视图架构

### Phase 4: UX优化 (1周)
- Sprint 6: 细节打磨

**总计**: 6-9周

---

## 📊 预期效果

### 用户体验指标

| 指标 | V3 | V4目标 | 改进幅度 |
|------|----|----|----------|
| 意图理解准确率 | 0% | 85%+ | ∞ |
| 工作流完整性 | 60% | 100% | +67% |
| 实时反馈体验 | 静态 | 动态实时 | +200% |
| 空间利用率 | 40% | 85% | +112% |
| 交互智能度 | 20% | 90% | +350% |

### 产品完整度

- **逻辑闭环**: 0% → 100%
- **功能清晰**: 60% → 95%
- **视觉吸引**: 50% → 85%

---

## 🎯 成功标准

### Must Have (必须)
- [ ] 用户可选择分析类型（不再强制DD）
- [ ] Agent工作过程实时可见
- [ ] IM生成后可添加材料并迭代
- [ ] 支持版本管理和回滚

### Should Have (应该)
- [ ] 意图识别准确率 >85%
- [ ] 右侧面板动画流畅（60fps）
- [ ] 多轮对话自然流畅

### Could Have (可以)
- [ ] AI主动提出分析建议
- [ ] 多人协作编辑IM
- [ ] 移动端适配

---

## 🛠️ 技术要点

### 1. 意图识别
**方案**: 混合式(关键词 + 正则 + LLM)
- 快速匹配: < 10ms
- 规则匹配: < 20ms
- LLM分类: ~300ms

### 2. 实时通信
**方案**: EventBus + WebSocket
```
Agent → EventBus → WebSocket → Frontend
```

### 3. 版本管理
**方案**: 增量存储(只存diff)
- 节省空间: 70%+
- 重建速度: < 100ms

---

## 📖 学习资源

### 竞品参考

**ChatGPT**:
- ✅ 流畅对话体验
- ✅ 实时打字效果
- ✅ 清晰思考过程

**Perplexity**:
- ✅ 搜索源实时展示
- ✅ 引用可点击
- ✅ 相关问题推荐

**Claude Code**:
- ✅ 思考标签可见
- ✅ 工具使用展示
- ✅ 代码执行内联

### 设计灵感

- **Linear**: 流畅动画、渐进式加载
- **Notion**: 块状编辑、协作体验
- **Figma**: 实时协作、版本管理

---

## ⚠️ 注意事项

### 技术风险
- **意图识别准确率**: 需要充分测试和调优
- **实时性能**: WebSocket连接稳定性
- **动画流畅度**: 大量DOM更新的性能

### 产品风险
- **学习曲线**: 新交互模式需要用户适应
- **功能复杂度**: 避免过度设计

### 资源风险
- **开发周期**: 6-9周，可能延期
- **人力投入**: 需要专职前后端开发

---

## 🚀 快速开始

### 如果你是产品经理
1. 阅读 [V4_Executive_Summary.md](V4_Executive_Summary.md)
2. 了解V3问题和V4改进方向
3. 评审并决策是否启动V4

### 如果你是开发者
1. 阅读 [V4_Product_Analysis_and_Plan.md](V4_Product_Analysis_and_Plan.md)
2. 了解详细技术方案
3. 准备技术预研

### 如果你是设计师
1. 阅读交互设计部分
2. 参考竞品设计
3. 开始UI设计稿

---

## 📞 反馈与讨论

### 问题讨论
如有任何问题或建议，请：
1. 创建GitHub Issue
2. 或在团队会议中提出
3. 或直接联系产品负责人

### 文档更新
本目录文档将持续更新：
- 评审后的修改
- 技术预研结果
- Sprint进度更新

---

## 📝 版本历史

- **v1.0** (2025-10-26): 初始版本，完整V4规划
  - 创建Executive Summary
  - 创建详细设计文档
  - 定义6个Sprint计划

---

**当前状态**: 📋 等待评审
**下一步**: 产品评审 → 技术预研 → 启动Sprint 1
