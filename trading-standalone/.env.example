# ===========================================
# Magellan Trading Standalone - Environment Variables
# ===========================================
# Copy this file to .env and fill in your values
# cp .env.example .env

# ========== LLM API Keys ==========
# At least one is required

# Google Gemini
GOOGLE_API_KEY=your_google_api_key_here
GEMINI_MODEL_NAME=gemini-2.5-flash

# Moonshot Kimi
KIMI_API_KEY=your_kimi_api_key_here
KIMI_BASE_URL=https://api.moonshot.cn/v1
KIMI_MODEL_NAME=moonshot-v1-128k

# DeepSeek (recommended - cost effective)
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_MODEL_NAME=deepseek-chat

# Default LLM provider: gemini, kimi, deepseek
# âš ï¸ IMPORTANT: Use 'deepseek' for trading (best tool calling support)
# Gemini has known issues with complex tool calling (15+ tools)
DEFAULT_LLM_PROVIDER=deepseek

# ========== OKX Exchange ==========
# Required for trading
# Get from: https://www.okx.com/account/my-api
# IMPORTANT: Use Demo Trading API keys for testing!

OKX_API_KEY=your_okx_api_key_here
OKX_SECRET_KEY=your_okx_secret_key_here
OKX_PASSPHRASE=your_okx_passphrase_here

# Demo mode: true = paper trading, false = real trading
OKX_DEMO_MODE=true

# ğŸ†• å¯ç”¨ OKX æ¨¡æ‹Ÿç›˜äº¤æ˜“ (å…³é”®é…ç½®!)
# true = ä½¿ç”¨ OKX æ¨¡æ‹Ÿç›˜, false = ä½¿ç”¨æœ¬åœ° PaperTrader
USE_OKX_TRADING=true

# ========== Trading Parameters ==========
# Trading pair
TRADING_SYMBOL=BTC-USDT-SWAP

# ========== Risk Control ==========
# Maximum leverage (1-125, recommended <= 20)
MAX_LEVERAGE=20

# Position size as percentage of account balance
MAX_POSITION_PERCENT=30       # Maximum position 30%
MIN_POSITION_PERCENT=10       # Minimum position 10%
DEFAULT_POSITION_PERCENT=20   # Default position 20%

# Minimum confidence to execute trade (0-100)
MIN_CONFIDENCE=60

# Default TP/SL percentages
DEFAULT_TP_PERCENT=5.0        # Default take profit 5%
DEFAULT_SL_PERCENT=2.0        # Default stop loss 2%

# ========== Scheduler ==========
# Analysis interval in hours
SCHEDULER_INTERVAL_HOURS=4

# Cooldown after consecutive losses
COOLDOWN_HOURS=24
MAX_CONSECUTIVE_LOSSES=3

# ========== Web Search ==========
# Optional, for market news analysis
TAVILY_API_KEY=your_tavily_api_key_here

# ========== Email Notifications ==========
# Optional, for receiving trading alerts
EMAIL_ENABLED=false

# Gmail example (enable "App passwords" in Google account)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
EMAIL_FROM=your_email@gmail.com
EMAIL_TO=recipient@example.com

# QQ Mail example
# SMTP_SERVER=smtp.qq.com
# SMTP_PORT=587
# SMTP_USER=your_qq_number@qq.com
# SMTP_PASSWORD=your_authorization_code
# EMAIL_FROM=your_qq_number@qq.com
# EMAIL_TO=recipient@example.com

# ========== Smart Execution ==========
# Capital tier thresholds (USD) for execution strategy selection
EXEC_CAPITAL_SMALL_MAX=1000       # Below: direct execution
EXEC_CAPITAL_MEDIUM_MAX=10000     # Below: slippage check, may one-shot
EXEC_CAPITAL_LARGE_MAX=50000      # Below: sliced execution

# Sliced execution settings
EXEC_SLICE_INTERVAL_SECONDS=60    # Seconds between slices
EXEC_SLICE_COUNT_DEFAULT=5        # Default number of slices
EXEC_SLICE_COUNT_MIN=3            # Minimum slices
EXEC_SLICE_COUNT_MAX=10           # Maximum slices
EXEC_SLICE_VARIANCE_PERCENT=10    # Random variance per slice

# Slippage settings
EXEC_MAX_SLIPPAGE_PERCENT=0.5     # Max allowed slippage %
EXEC_SLIPPAGE_WARNING_PERCENT=0.3 # Warning threshold %

# Volatility protection
EXEC_ABORT_ON_VOLATILITY=true     # Abort on volatility spike
EXEC_VOLATILITY_THRESHOLD=2.0     # Volatility % to trigger abort

# Execution retry
EXEC_MAX_RETRY_PER_SLICE=3        # Max retries per slice
EXEC_RETRY_DELAY_SECONDS=5        # Delay between retries

# ========== Logging ==========
LOG_LEVEL=INFO
