# ===========================================
# Magellan Trading Standalone - Configuration
# ===========================================
# 自动交易系统独立配置文件
# 编辑此文件后运行 ./start.sh 启动服务

# ========== 交易参数 ==========
trading:
  # 交易对
  symbol: "BTC-USDT-SWAP"

  # 是否使用 OKX 模拟盘 (Demo Trading)
  # true = 使用 OKX 模拟盘 (需要模拟盘 API Key，在 OKX 网站单独申请)
  # false = 使用 OKX 实盘 (真实交易，请谨慎！)
  # 注意: 模拟盘和实盘的 API Key 是不同的
  demo_mode: true

# ========== 风险控制参数 ==========
# 这些参数限制 Agent 的决策范围，确保风险可控
risk:
  # 最大杠杆倍数 (1-125，建议不超过20)
  # Agent 只能在这个范围内选择杠杆
  max_leverage: 20

  # 仓位百分比范围 (占账户资金的比例)
  max_position_percent: 30      # 最大仓位 30%
  min_position_percent: 10      # 最小仓位 10%
  default_position_percent: 20  # 默认仓位 20%

  # 最低信心度要求 (0-100)
  # 低于此值 Agent 会选择观望
  min_confidence: 60

  # 默认止盈止损百分比 (Agent 可以调整)
  default_tp_percent: 5.0       # 默认止盈 5%
  default_sl_percent: 2.0       # 默认止损 2%

  # 杠杆-信心度对应规则 (Agent 强制遵循):
  # - 高信心度(>80%): 使用 50%-100% 的最大杠杆 (10-20倍)
  # - 中信心度(60-80%): 使用 25%-50% 的最大杠杆 (5-10倍)
  # - 低信心度(<60%): 使用 1-25% 的最大杠杆 或观望 (1-5倍)

# ========== 分析调度 ==========
scheduler:
  # 分析间隔 (小时)
  interval_hours: 4

  # 连续亏损后冷却时间 (小时)
  cooldown_hours: 24

  # 最大连续亏损次数 (触发冷却)
  max_consecutive_losses: 3

# ========== LLM 配置 ==========
llm:
  # 模型提供商: gemini, kimi, deepseek
  provider: "gemini"

  # 各提供商模型名称 (可选，有默认值)
  models:
    gemini: "gemini-2.5-flash"
    kimi: "moonshot-v1-8k"
    deepseek: "deepseek-chat"

# ========== 邮件通知 ==========
email:
  # 是否启用邮件通知
  enabled: false

  # SMTP 配置 (如果 enabled: true)
  smtp_server: "smtp.gmail.com"
  smtp_port: 587
  smtp_user: "${SMTP_USER}"
  smtp_password: "${SMTP_PASSWORD}"

  # 发送者和接收者
  from_address: "${EMAIL_FROM}"
  to_addresses:
    - "${EMAIL_TO}"

  # 通知事件
  notify_on:
    - decision       # 每次交易决策
    - execution      # 交易执行
    - tp_hit         # 止盈触发
    - sl_hit         # 止损触发
    - error          # 系统错误

# ========== 日志配置 ==========
logging:
  # 日志级别: DEBUG, INFO, WARNING, ERROR
  level: "INFO"

  # 日志保留天数
  retention_days: 30

# ========== 资源限制 ==========
resources:
  # Redis 最大内存
  redis_max_memory: "256mb"

  # LLM Gateway worker 数量
  llm_workers: 1
